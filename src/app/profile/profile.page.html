<!-- cabeçalho -->
<ion-header>
    <ion-toolbar>
        <ion-title style="font-weight: bold; font-size: 20px;">{{(userPosts | async)?.username}}</ion-title>
        <ion-buttons slot="end">
            <ion-menu-button slot="icon-only" name="menu-outline"></ion-menu-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<!-- informações -->
<ion-content id="profile" padding>
    <ion-row>
        <ion-col style="text-align: -webkit-center;">
            <ion-avatar class="profile-avatar">
                <input class="input-file" type="file" (change)="fileChanged($event)" #fileButton />
                <img src="https://ucarecdn.com/{{ (userPosts | async)?.avatar }}/" (click)="uploadFile()" />
            </ion-avatar>
        </ion-col>
        <ion-col class="ion-text-center">
            <h4 style=" margin-bottom: 2px;">{{(userPosts | async)?.posts.length}}</h4>
            <p class="info-profile">Publicações</p>
        </ion-col>
        <ion-col class="ion-text-center">
            <h4 style=" margin-bottom: 2px;">{{(users | async)?.length}}</h4>
            <p class="info-profile">Amigos</p>
        </ion-col>
    </ion-row>

    <!-- biografia -->
    <div class="ion-padding-start">
        <b>{{(userPosts | async)?.username}}</b>
        <div *ngIf="(userPosts | async)?.biografia !== undefined">
            <p class="ion-no-margin">{{ (userPosts | async)?.biografia }}</p>
        </div>
        <ion-button routerLink="../editar-profile" expand="block" size="small" id="btn-editar-perfil">Editar perfil
        </ion-button>
    </div>

    <hr class="hr">

    <p>
        {{(userPosts | async)?.aguaTotalConsumida}}
    </p>
    <!-- conquistas -->
    <b class="ion-margin-start" style="margin-bottom: 0px;">Conquistas</b>
    <ion-row id="conquest">
        <div *ngIf="(userPosts | async)?.aguaTotalConsumida !== undefined">
            <ion-col *ngIf="(userPosts | async)?.aguaTotalConsumida >= 1000">
                <img style="display:show" src="https://img.icons8.com/clouds/50/000000/water.png" />
            </ion-col>
            <ion-col *ngIf="(userPosts | async)?.aguaTotalConsumida >= 2000">
                <img style="display:show" src="https://img.icons8.com/clouds/50/000000/drink-time.png" />
            </ion-col>
            <ion-col *ngIf="(userPosts | async)?.aguaTotalConsumida >= 3000">
                <img style="display:show" src="https://img.icons8.com/clouds/50/000000/water-cooler.png" />
            </ion-col>
            <ion-col *ngIf="(userPosts | async)?.aguaTotalConsumida >= 4000">
                <img style="display:show" src="https://img.icons8.com/clouds/50/000000/kawaii-soda.png" />
            </ion-col>
            <ion-col *ngIf="(userPosts | async)?.aguaTotalConsumida >= 5000">
                <img style="display:show" src="https://img.icons8.com/bubbles/50/000000/water.png" />
            </ion-col>
            <ion-col *ngIf="(userPosts | async)?.aguaTotalConsumida >= 6000">
                <img style="display:show" src="https://img.icons8.com/bubbles/50/000000/water-cooler.png" />
            </ion-col>
        </div>
    </ion-row>

    <hr style="margin-top: 0px;" class="hr">

    <!-- exibição das publicações -->
    <ion-segment [(ngModel)]="nCols">
        <ion-segment-button [value]="3">
            <ion-icon name="grid"></ion-icon>
        </ion-segment-button>
        <ion-segment-button [value]="1">
            <ion-icon name="square"></ion-icon>
        </ion-segment-button>
    </ion-segment>

    <!-- publicações -->
    <ion-row id="images">
        <ion-col [size]="12/nCols" class="image" *ngFor="let post of ((userPosts | async)?.posts); let i = index">
            <ion-card>
                <ion-icon (click)="deleteImg(post.imagem, post.desc, post.date);" style="padding-left: 4px;"
                    name="close-circle"></ion-icon>
                <ion-img src="https://ucarecdn.com/{{ post.imagem }}/-/scale_crop/400x400/center/"
                    (click)="zoom(post.imagem, post.desc)"></ion-img>
            </ion-card>
        </ion-col>
    </ion-row>
</ion-content>


<ion-menu contentId="profile" menuId="profile-menu" side="end">
    <ion-header>
        <ion-toolbar>
            <ion-title>profile</ion-title>
        </ion-toolbar>
    </ion-header>

    <!-- menu com itens -->
    <ion-content>
        <ion-list>
            <ion-item>
                <ion-icon name="podium-outline"></ion-icon>
                <ion-label class="ion-padding-start">Sua atividade</ion-label>
            </ion-item>
            <ion-item>
                <ion-icon name="settings-outline"></ion-icon>
                <ion-label class="ion-padding-start">Configurações</ion-label>
            </ion-item>
            <ion-item>
                <ion-icon name="log-out-outline"></ion-icon>
                <ion-label class="ion-padding-start" (click)="sair()">Sair</ion-label>
            </ion-item>
        </ion-list>
    </ion-content>
</ion-menu>